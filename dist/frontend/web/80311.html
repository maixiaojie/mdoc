<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>重学前端</title>
    <meta name="description" content="to learn frontend again">
    <link rel="icon" href="/frontend/logo.png">
    
    <link rel="preload" href="/frontend/assets/css/0.styles.cab18924.css" as="style"><link rel="preload" href="/frontend/assets/js/app.ea4df223.js" as="script"><link rel="preload" href="/frontend/assets/js/17.ab70dd33.js" as="script"><link rel="prefetch" href="/frontend/assets/js/10.25bc846c.js"><link rel="prefetch" href="/frontend/assets/js/11.bc2c32ee.js"><link rel="prefetch" href="/frontend/assets/js/12.8eee571e.js"><link rel="prefetch" href="/frontend/assets/js/13.b00f17ab.js"><link rel="prefetch" href="/frontend/assets/js/14.a2803edd.js"><link rel="prefetch" href="/frontend/assets/js/15.ddec8ffc.js"><link rel="prefetch" href="/frontend/assets/js/16.45bbfccf.js"><link rel="prefetch" href="/frontend/assets/js/18.5d200f13.js"><link rel="prefetch" href="/frontend/assets/js/19.d7c1b3fc.js"><link rel="prefetch" href="/frontend/assets/js/2.fcb643ec.js"><link rel="prefetch" href="/frontend/assets/js/20.4838fa19.js"><link rel="prefetch" href="/frontend/assets/js/21.404bf016.js"><link rel="prefetch" href="/frontend/assets/js/22.13f1c3d2.js"><link rel="prefetch" href="/frontend/assets/js/23.df54eb99.js"><link rel="prefetch" href="/frontend/assets/js/24.f7026017.js"><link rel="prefetch" href="/frontend/assets/js/25.1647ba50.js"><link rel="prefetch" href="/frontend/assets/js/26.43d75c21.js"><link rel="prefetch" href="/frontend/assets/js/27.b7a5c264.js"><link rel="prefetch" href="/frontend/assets/js/28.42ab6f60.js"><link rel="prefetch" href="/frontend/assets/js/29.3be52831.js"><link rel="prefetch" href="/frontend/assets/js/3.67ca9950.js"><link rel="prefetch" href="/frontend/assets/js/30.61efc439.js"><link rel="prefetch" href="/frontend/assets/js/31.0654f2f5.js"><link rel="prefetch" href="/frontend/assets/js/32.8a762466.js"><link rel="prefetch" href="/frontend/assets/js/33.fc62cd74.js"><link rel="prefetch" href="/frontend/assets/js/34.775792ed.js"><link rel="prefetch" href="/frontend/assets/js/35.84ada367.js"><link rel="prefetch" href="/frontend/assets/js/36.f5eb5f30.js"><link rel="prefetch" href="/frontend/assets/js/37.1829f6e7.js"><link rel="prefetch" href="/frontend/assets/js/38.e0fecfd5.js"><link rel="prefetch" href="/frontend/assets/js/39.2d8b6a6e.js"><link rel="prefetch" href="/frontend/assets/js/4.c198c68a.js"><link rel="prefetch" href="/frontend/assets/js/40.63ae98d6.js"><link rel="prefetch" href="/frontend/assets/js/41.1d7e05cb.js"><link rel="prefetch" href="/frontend/assets/js/42.518251d4.js"><link rel="prefetch" href="/frontend/assets/js/43.5abf0c03.js"><link rel="prefetch" href="/frontend/assets/js/44.cb8c1d71.js"><link rel="prefetch" href="/frontend/assets/js/45.06ffe176.js"><link rel="prefetch" href="/frontend/assets/js/46.904eb518.js"><link rel="prefetch" href="/frontend/assets/js/47.9df35c0c.js"><link rel="prefetch" href="/frontend/assets/js/48.87845ad3.js"><link rel="prefetch" href="/frontend/assets/js/49.b39e2eeb.js"><link rel="prefetch" href="/frontend/assets/js/5.64877e93.js"><link rel="prefetch" href="/frontend/assets/js/50.244298fc.js"><link rel="prefetch" href="/frontend/assets/js/51.dcdf5ed2.js"><link rel="prefetch" href="/frontend/assets/js/52.319a80d8.js"><link rel="prefetch" href="/frontend/assets/js/53.37f1dd02.js"><link rel="prefetch" href="/frontend/assets/js/54.5aedbbd1.js"><link rel="prefetch" href="/frontend/assets/js/55.9b0c6fab.js"><link rel="prefetch" href="/frontend/assets/js/56.0876f082.js"><link rel="prefetch" href="/frontend/assets/js/57.893a5146.js"><link rel="prefetch" href="/frontend/assets/js/58.901618e5.js"><link rel="prefetch" href="/frontend/assets/js/59.1ea986e8.js"><link rel="prefetch" href="/frontend/assets/js/6.c9edeb04.js"><link rel="prefetch" href="/frontend/assets/js/60.80a0f6c8.js"><link rel="prefetch" href="/frontend/assets/js/61.ab581dd1.js"><link rel="prefetch" href="/frontend/assets/js/7.6b5ad3f5.js"><link rel="prefetch" href="/frontend/assets/js/8.fa501aa9.js"><link rel="prefetch" href="/frontend/assets/js/9.19ca76d6.js">
    <link rel="stylesheet" href="/frontend/assets/css/0.styles.cab18924.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/frontend/" class="home-link router-link-active"><!----> <span class="site-name">重学前端</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/frontend/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">其他专栏</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://doc.mcust.cn/ds/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  数据结构与算法之美
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://doc.mcust.cn/jvm/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  深入拆解 Java 虚拟机
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://doc.mcust.cn/netprotocol/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  趣谈网络协议
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://doc.mcust.cn/air/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  左耳听风
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://doc.mcust.cn/blockchain/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  深入浅出区块链
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/frontend/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">其他专栏</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://doc.mcust.cn/ds/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  数据结构与算法之美
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://doc.mcust.cn/jvm/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  深入拆解 Java 虚拟机
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://doc.mcust.cn/netprotocol/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  趣谈网络协议
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://doc.mcust.cn/air/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  左耳听风
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://doc.mcust.cn/blockchain/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  深入浅出区块链
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/frontend/web/77345.html" class="sidebar-link">开篇词 | 从今天起，重新理解前端</a></li><li><a href="/frontend/web/77749.html" class="sidebar-link">01 | 明确你的前端学习路线与方法</a></li><li><a href="/frontend/web/77804.html" class="sidebar-link">02 | 列一份前端知识架构图</a></li><li><a href="/frontend/web/78158.html" class="sidebar-link">03 | HTML语义：div和span不是够用了吗？</a></li><li><a href="/frontend/web/78168.html" class="sidebar-link">04 |  HTML语义：如何运用语义类标签来呈现Wiki网页？</a></li><li><a href="/frontend/web/78884.html" class="sidebar-link">05 | JavaScript类型：关于类型，有哪些你不知道的细节？</a></li><li><a href="/frontend/web/79319.html" class="sidebar-link">06 | JavaScript对象：面向对象还是基于对象？</a></li><li><a href="/frontend/web/79539.html" class="sidebar-link">07  | JavaScript对象：我们真的需要模拟类吗？</a></li><li><a href="/frontend/web/80011.html" class="sidebar-link">08 | JavaScript对象：你知道全部的对象分类吗？</a></li><li><a href="/frontend/web/80021.html" class="sidebar-link">新年彩蛋 | 2019，有哪些前端技术值得关注？</a></li><li><a href="/frontend/web/80042.html" class="sidebar-link">09 | CSS语法：除了属性和选择器，你还需要知道这些带@的规则</a></li><li><a href="/frontend/web/80240.html" class="sidebar-link">10 | 浏览器：一个浏览器是如何工作的？（阶段一）</a></li><li><a href="/frontend/web/80260.html" class="sidebar-link">11 | 浏览器：一个浏览器是如何工作的？（阶段二）</a></li><li><a href="/frontend/web/80311.html" class="active sidebar-link">12 | 浏览器：一个浏览器是如何工作的（阶段三）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend/web/80311.html#整体过程" class="sidebar-link">整体过程</a></li><li class="sidebar-sub-header"><a href="/frontend/web/80311.html#后代选择器-“空格”" class="sidebar-link">后代选择器 “空格”</a></li><li class="sidebar-sub-header"><a href="/frontend/web/80311.html#后继选择器“-”" class="sidebar-link">后继选择器“ ~ ”</a></li><li class="sidebar-sub-header"><a href="/frontend/web/80311.html#子代选择器“-”" class="sidebar-link">子代选择器“ &gt;”</a></li><li class="sidebar-sub-header"><a href="/frontend/web/80311.html#直接后继选择器“-”" class="sidebar-link">直接后继选择器“ +”</a></li><li class="sidebar-sub-header"><a href="/frontend/web/80311.html#列选择器“-”" class="sidebar-link">列选择器“ || ”</a></li><li class="sidebar-sub-header"><a href="/frontend/web/80311.html#其它" class="sidebar-link">其它</a></li><li class="sidebar-sub-header"><a href="/frontend/web/80311.html#结语" class="sidebar-link">结语</a></li></ul></li><li><a href="/frontend/web/81730.html" class="sidebar-link">13 | 浏览器：一个浏览器是如何工作的？（阶段四）</a></li><li><a href="/frontend/web/82397.html" class="sidebar-link">14 | 浏览器：一个浏览器是如何工作的？（阶段五）</a></li><li><a href="/frontend/web/82711.html" class="sidebar-link">15 | HTML元信息类标签：你知道head里一共能写哪几种标签吗？</a></li><li><a href="/frontend/web/82764.html" class="sidebar-link">16 | JavaScript执行（一）：Promise里的代码为什么比setTimeout先执行？</a></li><li><a href="/frontend/web/83302.html" class="sidebar-link">17 | JavaScript执行（二）：闭包和执行上下文到底是怎么回事？</a></li><li><a href="/frontend/web/83719.html" class="sidebar-link">18 | JavaScript执行（三）：你知道现在有多少种函数吗？</a></li><li><a href="/frontend/web/83860.html" class="sidebar-link">19 | JavaScript执行（四）：try里面放return，finally还会执行吗？</a></li><li><a href="/frontend/web/84365.html" class="sidebar-link">20 | CSS 选择器：如何选中svg里的a元素？</a></li><li><a href="/frontend/web/84633.html" class="sidebar-link">21 | CSS选择器：伪元素是怎么回事儿？</a></li><li><a href="/frontend/web/85031.html" class="sidebar-link">22 | 浏览器DOM：你知道HTML的节点有哪几种吗？</a></li><li><a href="/frontend/web/85341.html" class="sidebar-link">23 | HTML链接：除了a标签，还有哪些标签叫链接？</a></li><li><a href="/frontend/web/85745.html" class="sidebar-link">24 | CSS排版：从毕升开始，我们就开始用正常流了</a></li><li><a href="/frontend/web/86117.html" class="sidebar-link">25 | 浏览器CSSOM：如何获取一个元素的准确位置</a></li><li><a href="/frontend/web/86400.html" class="sidebar-link">26 | JavaScript词法：为什么12.toString会报错？</a></li><li><a href="/frontend/web/86823.html" class="sidebar-link">27 |（小实验）理解编译原理：一个四则运算的解释器</a></li><li><a href="/frontend/web/87179.html" class="sidebar-link">28 | JavaScript语法（预备篇）：到底要不要写分号呢？</a></li><li><a href="/frontend/web/87234.html" class="sidebar-link">用户故事 | 那些你与“重学前端”的不解之缘</a></li><li><a href="/frontend/web/87808.html" class="sidebar-link">29 | JavaScript语法（一）：在script标签写export为什么会抛错？</a></li><li><a href="/frontend/web/88275.html" class="sidebar-link">期中答疑 | name(){}与name: function() {}，两种写法有什么区别吗？</a></li><li><a href="/frontend/web/88538.html" class="sidebar-link">30 |  JavaScript语法（二）：你知道哪些JavaScript语句？</a></li><li><a href="/frontend/web/88827.html" class="sidebar-link">31 | JavaScript语法（三）：什么是表达式语句？</a></li><li><a href="/frontend/web/89151.html" class="sidebar-link">32 | JavaScript语法（四）：新加入的**运算符，哪里有些不一样呢？</a></li><li><a href="/frontend/web/89491.html" class="sidebar-link">33 | HTML替换型元素：为什么link一个CSS要用href，而引入js要用src呢？</a></li><li><a href="/frontend/web/89832.html" class="sidebar-link">34 | HTML小实验：用代码分析HTML标准</a></li><li><a href="/frontend/web/90148.html" class="sidebar-link">35 | CSS Flex排版：为什么垂直居中这么难？</a></li><li><a href="/frontend/web/90485.html" class="sidebar-link">36 | 浏览器事件：为什么会有捕获过程和冒泡过程？</a></li><li><a href="/frontend/web/90998.html" class="sidebar-link">37 | 浏览器API（小实验）：动手整理全部API</a></li><li><a href="/frontend/web/91325.html" class="sidebar-link">38 | CSS动画与交互：为什么动画要用贝塞尔曲线这么奇怪的东西？</a></li><li><a href="/frontend/web/91644.html" class="sidebar-link">答疑加餐 | 学了这么多前端的“小众”知识，到底对我有什么帮助？</a></li><li><a href="/frontend/web/92227.html" class="sidebar-link">39 | HTML语言：DTD到底是什么？</a></li><li><a href="/frontend/web/92663.html" class="sidebar-link">40 | CSS渲染：CSS是如何绘制颜色的？</a></li><li><a href="/frontend/web/93110.html" class="sidebar-link">41 | CSS小实验：动手做，用代码挖掘CSS属性</a></li><li><a href="/frontend/web/93216.html" class="sidebar-link">加餐 | 前端与图形学</a></li><li><a href="/frontend/web/93289.html" class="sidebar-link">加餐 | 前端交互基础设施的建设</a></li><li><a href="/frontend/web/93777.html" class="sidebar-link">42 | HTML·ARIA：可访问性是只给盲人用的特性么？</a></li><li><a href="/frontend/web/94156.html" class="sidebar-link">43 | 性能：前端的性能到底对业务数据有多大的影响？</a></li><li><a href="/frontend/web/94644.html" class="sidebar-link">44 | 工具链：什么样的工具链才能提升团队效率？</a></li><li><a href="/frontend/web/94979.html" class="sidebar-link">45 | 持续集成：几十个前端一起工作，如何保证工作质量？</a></li><li><a href="/frontend/web/95469.html" class="sidebar-link">46 | 搭建系统：大量的低价值需求应该如何应对？</a></li><li><a href="/frontend/web/95833.html" class="sidebar-link">47 | 前端架构：前端架构有哪些核心问题？</a></li><li><a href="/frontend/web/96269.html" class="sidebar-link">期末答疑（一）：前端代码单元测试怎么做？</a></li><li><a href="/frontend/web/96809.html" class="sidebar-link">期末答疑（二）：前端架构中，每个逻辑页面如何可以做到独立发布呢？</a></li><li><a href="/frontend/web/97144.html" class="sidebar-link">尾声 | 长风破浪会有时，直挂云帆济沧海</a></li></ul> </div> <div class="page"> <div class="content"><p>大家好，我是winter。</p> <p>在上一节课中，我已经讲了浏览器的DOM构建过程，但是这个构建的DOM，实际上信息是不全的，它只有节点和属性，不包含任何的样式信息。</p> <p>我们这一节课就来讲讲：浏览器是如何把CSS规则应用到节点上，并给这棵朴素的DOM树添加上CSS属性的。</p> <h2 id="整体过程"><a href="#整体过程" aria-hidden="true" class="header-anchor">#</a> 整体过程</h2> <p>首先我们还是要感性地理解一下这个过程。</p> <p>首先CSS选择器这个名称，可能会给你带来一定的误解，觉得好像CSS规则是DOM树构建好了以后，再进行选择并给它添加样式的。实际上，这个过程并不是这样的。</p> <p>我们回忆一下我们在浏览器第一节课讲的内容，浏览器会尽量流式处理整个过程。我们上一节课构建DOM的过程是：从父到子，从先到后，一个一个节点构造，并且挂载到DOM树上的，那么这个过程中，我们是否能同步把CSS属性计算出来呢？</p> <p>答案是肯定的。</p> <p>在这个过程中，我们依次拿到上一步构造好的元素，去检查它匹配到了哪些规则，再根据规则的优先级，做覆盖和调整。所以，从这个角度看，所谓的选择器，应该被理解成“匹配器”才更合适。</p> <p>我在CSS语法部分，已经总结了选择器的各种符号，这里再把它列出来，我们回顾一下：</p> <ul><li>空格: 后代，选中它的子节点和所有子节点的后代节点。</li> <li>&gt;: 子代，选中它的子节点。</li> <li>+：直接后继选择器，选中它的下一个相邻节点。</li> <li>~：后继，选中它之后所有的相邻节点。</li> <li>||：列，选中表格中的一列。</li></ul> <p>关于选择器的知识，我会在CSS的部分继续讲解。这里我们主要介绍浏览器是如何实现这些规则的。</p> <p>不知道你有没有发现，这里的选择器有个特点，那就是选择器的出现顺序，必定跟构建DOM树的顺序一致。这是一个CSS设计的原则，即保证选择器在DOM树构建到当前节点时，已经可以准确判断是否匹配，不需要后续节点信息。</p> <p>也就是说，未来也不可能会出现“父元素选择器”这种东西，因为父元素选择器要求根据当前节点的子节点，来判断当前节点是否被选中，而父节点会先于子节点构建。</p> <p>理解了CSS构建的大概过程，我们下面来看看具体的操作。</p> <p>首先，我们必须把CSS规则做一下处理。作为一门语言，CSS需要先经过词法分析和语法分析，变成计算机能够理解的结构。</p> <p>这部分具体的做法属于编译原理的内容，这里就不做赘述了。我们这里假设CSS已经被解析成了一棵可用的抽象语法树。</p> <p>我们在之前的CSS课程中已经介绍过 compound-selector 的概念，一个 compound-selector 是检查一个元素的规则，而一个复合型选择器，则是由数个 compound-selector 通过前面讲的符号连接起来的。</p> <h2 id="后代选择器-“空格”"><a href="#后代选择器-“空格”" aria-hidden="true" class="header-anchor">#</a> 后代选择器 “空格”</h2> <p>我们先来分析一下后代选择器，我们来一起看一个例子：</p> <pre><code>a#b .cls {
    width: 100px;
}
</code></pre> <p>可以把一个CSS选择器按照 compound-selector 来拆成数段，每当满足一段条件的时候，就前进一段。</p> <p>比如，在上面的例子中，当我们找到了匹配a#b的元素时，我们才会开始检查它所有的子代是否匹配 .cls。</p> <p>除了前进一段的情况，我们还需要处理后退的情况，比如，我们这样一段代码：</p> <pre><code>&lt;a id=b&gt;
    &lt;span&gt;1&lt;span&gt;
    &lt;span class=cls&gt;2&lt;span&gt;
&lt;/a&gt;
&lt;span class=cls&gt;3&lt;span&gt;
</code></pre> <p>当遇到 时，必须使得规则 a#b .cls 回退一步，这样第三个 span 才不会被选中。后代选择器的作用范围是父节点的所有子节点，因此规则是在匹配到本标签的结束标签时回退。</p> <h2 id="后继选择器“-”"><a href="#后继选择器“-”" aria-hidden="true" class="header-anchor">#</a> 后继选择器“ ~ ”</h2> <p>接下来我们看下后继选择器，跟后代选择器不同的地方是，后继选择器只作用于一层，我们来看一个例子：</p> <pre><code>.cls~* {
    border:solid 1px green;
}
&lt;div&gt;
&lt;span&gt;1&lt;span&gt;
&lt;span class=cls&gt;2&lt;span&gt;
&lt;span&gt;
    3
    &lt;span&gt;4&lt;/span&gt;
&lt;span&gt;
&lt;span&gt;5&lt;/span&gt;
&lt;/div&gt;
</code></pre> <p>这里 .cls 选中了 span 2 然后 span 3 是它的后继，但是span 3的子节点 span 4 并不应该被选中，而span 5也是它的后继，因此应该被选中。</p> <p>按照DOM树的构造顺序，4在3和5中间，我们就没有办法像前面讲的后代选择器一样通过激活或者关闭规则来实现匹配。</p> <p>但是这里有个非常方便的思路，就是给选择器的激活，带上一个条件：父元素。</p> <p>注意，这里后继选择器，当前半段的 .cls 匹配成功时，后续 * 所匹配的所有元素的父元素都已经确定了（后继节点和当前节点父元素相同是充分必要条件）。在我们的例子中，那个div就是后继节点的父元素。</p> <h2 id="子代选择器“-”"><a href="#子代选择器“-”" aria-hidden="true" class="header-anchor">#</a> 子代选择器“ &gt;”</h2> <p>我们继续看，子代选择器是如何实现的。</p> <p>实际上，有了前面讲的父元素这个约束思路，我们很容易实现子代选择器。区别仅仅是拿当前节点作为父元素，还是拿当前节点的父元素作为父元素。</p> <pre><code>div&gt;.cls {
    border:solid 1px green;
}
&lt;div&gt;
&lt;span&gt;1&lt;span&gt;
&lt;span class=cls&gt;2&lt;span&gt;
&lt;span&gt;
    3
    &lt;span&gt;4&lt;/span&gt;
&lt;span&gt;
&lt;span&gt;5&lt;/span&gt;
&lt;/div&gt;
</code></pre> <p>我们看这段代码，当DOM树构造到div时，匹配了CSS规则的第一段，因为是子代选择器，我们激活后面的 .cls选择条件，并且指定父元素必须是当前div。于是后续的构建DOM树构建过程中，span 2 就被选中了。</p> <h2 id="直接后继选择器“-”"><a href="#直接后继选择器“-”" aria-hidden="true" class="header-anchor">#</a> 直接后继选择器“ +”</h2> <p>直接后继选择器的实现是上述中最为简单的了，因为它只对唯一一个元素生效，所以不需要像前面几种一样反复激活和关闭规则。</p> <p>一个最简单的思路是，我们可以把它当作检查元素自身的选择器来处理。即我们把#id+.cls都当做检查某一个元素的选择器。</p> <p>另外的一种思路是：给后继选择器加上一个flag，使它匹配一次后失效。你可以尝试一下，告诉我结果。</p> <h2 id="列选择器“-”"><a href="#列选择器“-”" aria-hidden="true" class="header-anchor">#</a> 列选择器“ || ”</h2> <p>列选择器比较特别，它是专门针对表格的选择器，跟表格的模型建立相关，我们这里不详细讲了。</p> <h2 id="其它"><a href="#其它" aria-hidden="true" class="header-anchor">#</a> 其它</h2> <p>我们不要忘记，CSS选择器还支持逗号分隔，表示“或”的关系。这里最简单的实现是把逗号视为两条规则的一种简易写法。</p> <p>比如</p> <pre><code>a#b, .cls {

}
</code></pre> <p>我们当作两条规则来处理：</p> <pre><code>a#b {

}


.cls {

}
</code></pre> <p>还有一个情况，就是选择器可能有重合，这样，我们可以使用树形结构来进行一些合并，来提高效率：</p> <pre><code>#a .cls {

}

#a span {

}
#a&gt;span {

}
</code></pre> <p>这里实际上可以把选择器构造成一棵树：</p> <ul><li>#a
<ul><li>&lt;空格&gt;.cls</li> <li>&lt;空格&gt;span</li> <li>&gt;span</li></ul></li></ul> <p>需要注意的是，这里的树，必须要带上连接符。</p> <h2 id="结语"><a href="#结语" aria-hidden="true" class="header-anchor">#</a> 结语</h2> <p>这一节我们讲解了CSS计算的过程。CSS计算是把CSS规则应用到DOM树上，为DOM结构添加显示相关属性的过程。在这一节中，我们主要介绍了选择器的几种复合结构应该如何实现。</p> <p>在这一步骤之后，我们得到了一棵带有CSS属性的树，为我们后续继续显式打下了基础。</p> <p>最后留一个问题，你认为CSS语法解析成什么结构，最适合我们进行CSS计算。</p> <p><img src="https://static001.geekbang.org/resource/image/a1/9d/a1fa9a462fb96ae3a70ff4751203d79d.jpg" alt></p></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/frontend/web/80260.html" class="prev">
          11 | 浏览器：一个浏览器是如何工作的？（阶段二）
        </a></span> <span class="next"><a href="/frontend/web/81730.html">
          13 | 浏览器：一个浏览器是如何工作的？（阶段四）
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/frontend/assets/js/app.ea4df223.js" defer></script><script src="/frontend/assets/js/17.ab70dd33.js" defer></script>
  </body>
</html>
