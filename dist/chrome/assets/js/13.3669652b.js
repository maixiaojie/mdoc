(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{175:function(t,s,n){"use strict";n.r(s);var a=n(0),e=Object(a.a)({},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),n("p",[n("code",[t._v("header")]),t._v(" 方法返回了一个 "),n("a",{attrs:{href:"http://www.jsonml.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("JsonML"),n("OutboundLink")],1),t._v(" (注： "),n("code",[t._v("JsonML")]),t._v(" : "),n("code",[t._v("JSON Markup Language")]),t._v(" - "),n("code",[t._v("JSON")]),t._v(" 标记语言) 数组，由这些组成：")]),t._v(" "),t._m(10),t._v(" "),n("p",[t._v("(如果看起来很眼熟的话，那可能是因为你之前写过一些 "),n("a",{attrs:{href:"https://reactjs.org/docs/react-without-jsx.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("React 代码"),n("OutboundLink")],1),t._v(" 😄)")]),t._v(" "),t._m(11),t._v(" "),t._m(12),t._v(" "),t._m(13),t._v(" "),n("p",[t._v("现有好几种 "),n("code",[t._v("custom formatter")]),t._v(" 可供选择，例如：你可以在这个 "),n("a",{attrs:{href:"https://github.com/andrewdavey/immutable-devtools",target:"_blank",rel:"noopener noreferrer"}},[t._v("immutable-devtools "),n("OutboundLink")],1),t._v(" 仓库中找到对于 "),n("a",{attrs:{href:"https://facebook.github.io/immutable-js/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Immutable.js"),n("OutboundLink")],1),t._v("  结构的完美展示。但你同样可以自己造一个。")]),t._v(" "),t._m(14),t._v(" "),t._m(15),t._v(" "),n("p",[t._v("撇开实用性，我们还可以找点乐子：")]),t._v(" "),t._m(16),t._v(" "),n("blockquote",[n("p",[n("a",{attrs:{href:"https://gist.github.com/sulco/e635a7511d5ff17d44fe9bb2ab8b3cc6",target:"_blank",rel:"noopener noreferrer"}},[t._v("源码在这里"),n("OutboundLink")],1),t._v("为了方便大家尝试，源码贴在下面：")])]),t._v(" "),t._m(17),t._m(18),t._v(" "),t._m(19),t._v(" "),t._m(20)])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"console篇-自定义格式转换器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#console篇-自定义格式转换器","aria-hidden":"true"}},[this._v("#")]),this._v(" console篇 - 自定义格式转换器")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"前言"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前言","aria-hidden":"true"}},[this._v("#")]),this._v(" 前言")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[t._v("大多数的情况下，我们习惯使用 "),n("code",[t._v("DevTools")]),t._v(" 的 "),n("code",[t._v("console")]),t._v(" 默认对 "),n("code",[t._v("object")]),t._v(" 的转换，但有时候我们想用与众不同的方式来处理。\n那我们就可以自定义输出对象的函数，它通常被称为 "),n("code",[t._v("Custom Formatter")]),t._v(" 。")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("blockquote",[n("p",[t._v("请注意: 在我们写一个之前，需要在 "),n("code",[t._v("DevTools")]),t._v(" 进行设置 (在 "),n("code",[t._v("DevTools")]),t._v(" 的 "),n("code",[t._v("⋮")]),t._v(" 下拉框找到设置，或者按下 "),n("code",[t._v("F1")]),t._v(" ) 中把对应的设置打开:")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/12/14/167abc4fc44e3add?w=2000&h=1396&f=png&s=336889",alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("formatter")]),this._v(" 长什么样呢？ 它是一个对象，最多包含三个方法：")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ul",[n("li",[n("code",[t._v("header")]),t._v(" : 处理如何展示在 "),n("code",[t._v("console")]),t._v(" 的日志中的主要部分。")]),t._v(" "),n("li",[n("code",[t._v("hasbody")]),t._v(" : 如果你想显示一个用来展开对象的 "),n("code",[t._v("▶")]),t._v(" 箭头，返回 "),n("code",[t._v("true")])]),t._v(" "),n("li",[n("code",[t._v("body")]),t._v(" : 定义将会被显示在展开部分的内容中。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("一个基础的自定义 "),s("code",[this._v("formatter")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/12/14/167abc4fbd4b892f?w=1092&h=610&f=png&s=48708",alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("例子里移除了循环的结构的错误处理，让它看起来更加简洁")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("标签名")]),this._v(" "),s("li",[this._v("属性对象")]),this._v(" "),s("li",[this._v("内容 (文本值或者其他元素)")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("在输出的时候，这个简单的 "),s("code",[this._v("formatter")]),this._v(" 对于每一层嵌套，直接以 "),s("code",[this._v("7")]),this._v(" 个空格的缩进打印这个对象。所以现在我们的输出看起来是这样：")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/12/14/167abc4fc493cb88?w=884&h=654&f=gif&s=941282",alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"_1-自定义格式化转换器的应用实践"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-自定义格式化转换器的应用实践","aria-hidden":"true"}},[this._v("#")]),this._v(" 1. 自定义格式化转换器的应用实践")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("一般来说，每当你遇到结构不寻常的对象时，或大量的日志(最好避免这样的情况，但是有时候很有用)而你想从中做区分时，你可以采用 "),s("code",[this._v("custom formatter")]),this._v(" 来处理。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("一个很实用的窍门：直接将你不关心，不需要区别对待的对象过滤出来，直接在 "),s("code",[this._v("header")]),this._v(" 方法里面 "),s("code",[this._v("return null")]),this._v("。让 "),s("code",[this._v("DevTools")]),this._v(" 使用默认的格式化方式来处理这些值。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("这是一个关于 "),s("code",[this._v("console")]),this._v(" 的蠢萌例子：它叫做 "),s("code",[this._v("console.clown()")]),this._v(" :将打印对象进行转换，而且在对象前面加上一个 "),s("code",[this._v("emoji")]),this._v(" 表情 ...")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[t._v("window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("devtoolsFormatters "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("header")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("obj")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("obj"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__clown"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("delete")]),t._v(" obj"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__clown"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" style "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token string"}},[t._v("`\n        color: red;\n        border: dotted 2px gray;\n        border-radius: 4px;\n        padding: 5px;\n      `")])]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" content "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token string"}},[t._v("`🤡 ")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'div'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("style"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" content"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// for circular structures")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// use the default formatter")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("hasBody")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("clown")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("obj")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("obj"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" __clown"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("message"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello!'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// normal log")]),t._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("clown")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("message"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello!'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// a silly log")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("如你所见，我使用 "),s("code",[this._v("console.clown")]),this._v(" 方法打印出来的对象被添加了一个特殊的属性，便于将它区分出来，并且在 "),s("code",[this._v("formatter")]),this._v(" 中对它区别处理，但在大部分现实的案例中，这样更好：比如检查这个对象是不是某一个特殊类的实例等等。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("对了，"),s("code",[this._v("clown")]),this._v(" 打印出来了什么东西呢？ 在下面：")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/12/14/167abc4fbd5ae3f6?w=896&h=450&f=png&s=42023",alt:""}})])}],!1,null,null,null);s.default=e.exports}}]);